'use strict';

var $ = window.jQuery;

function showPassword() {
	// Cache our jquery elements
	var $submit = $('.btn-submit');
	var $field = $('.password-show');
	var show_pass = '<div class="a-form-show-password a-form-caption"><label><input type="checkbox" name="show_password" id="show-password-checkbox" value="1"> Show password</label></div>';
	// Inject the toggle button into the page
	$field.after(show_pass);
	// Cache the toggle button
	var $toggle = $('#show-password-checkbox');
	// Toggle the field type
	$toggle.on('click', function (e) {
		var checkbox = $(this);
		if (checkbox.is(':checked')) {
			$field.attr('type', 'text');
		} else {
			$field.attr('type', 'password');
		}
	});
	// Set the form field back to a regular password element
	$submit.on('click', function (e) {
		$field.attr('type', 'password');
	});
}

function checkPasswordStrength($password, $strengthMeter, $strengthText, $submitButton, blacklistArray) {
	var password = $password.val();

	// Reset the form & meter
	$submitButton.attr('disabled', 'disabled');
	$strengthText.removeClass('short bad good strong');

	// Extend our blacklist array with those from the inputs & site data
	blacklistArray = blacklistArray.concat(wp.passwordStrength.userInputBlacklist());

	// Get the password strength
	var strength = wp.passwordStrength.meter(password, blacklistArray, password);

	// Add the strength meter results
	switch (strength) {
		case 2:
			$strengthText.addClass('bad').html('Strength: <strong>' + pwsL10n.bad + '</strong>');
			break;
		case 3:
			$strengthText.addClass('good').html('Strength: <strong>' + pwsL10n.good + '</strong>');
			break;
		case 4:
			$strengthText.addClass('strong').html('Strength: <strong>' + pwsL10n.strong + '</strong>');
			break;
		case 5:
			$strengthText.addClass('short').html('Strength: <strong>' + pwsL10n.mismatch + '</strong>');
			break;
		default:
			$strengthText.addClass('short').html('Strength: <strong>' + pwsL10n.short + '</strong>');
	}
	$strengthMeter.val(strength);

	// Only enable the submit button if the password is strong
	/*
 if ( 4 === strength ) {
     $submitButton.removeAttr( 'disabled' );
 }*/

	return strength;
}

$(document).ready(function () {
	// show password if user clicks
	if ($('.password-show').length > 0) {
		showPassword();
	}
	// checkPasswordStrength
	if ($('.password-strength-check').length > 0) {
		var $before = $('.a-form-show-password');
		$before.after($('<meter max="4" id="password-strength"><div></div></meter><p id="password-strength-text"></p>'));
		$('body').on('keyup', 'input[name=password], input[name=new_password]', function (event) {
			checkPasswordStrength($('input[name=password], input[name=new_password]'), // Password field
			$('#password-strength'), // Strength meter
			$('#password-strength-text'), // Strength text indicator
			$('input[type=submit]'), // Submit button
			['black', 'listed', 'word'] // Blacklisted words
			);
		});
	}
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImpRdWVyeSIsInNob3dQYXNzd29yZCIsIiRzdWJtaXQiLCIkZmllbGQiLCJzaG93X3Bhc3MiLCJhZnRlciIsIiR0b2dnbGUiLCJvbiIsImUiLCJjaGVja2JveCIsImlzIiwiYXR0ciIsImNoZWNrUGFzc3dvcmRTdHJlbmd0aCIsIiRwYXNzd29yZCIsIiRzdHJlbmd0aE1ldGVyIiwiJHN0cmVuZ3RoVGV4dCIsIiRzdWJtaXRCdXR0b24iLCJibGFja2xpc3RBcnJheSIsInBhc3N3b3JkIiwidmFsIiwicmVtb3ZlQ2xhc3MiLCJjb25jYXQiLCJ3cCIsInBhc3N3b3JkU3RyZW5ndGgiLCJ1c2VySW5wdXRCbGFja2xpc3QiLCJzdHJlbmd0aCIsIm1ldGVyIiwiYWRkQ2xhc3MiLCJodG1sIiwicHdzTDEwbiIsImJhZCIsImdvb2QiLCJzdHJvbmciLCJtaXNtYXRjaCIsInNob3J0IiwiZG9jdW1lbnQiLCJyZWFkeSIsImxlbmd0aCIsIiRiZWZvcmUiLCJldmVudCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJQSxJQUFJQyxPQUFPQyxNQUFmOztBQUVBLFNBQVNDLFlBQVQsR0FBd0I7QUFDdkI7QUFDQSxLQUFJQyxVQUFVSixFQUFFLGFBQUYsQ0FBZDtBQUNBLEtBQUlLLFNBQVNMLEVBQUUsZ0JBQUYsQ0FBYjtBQUNBLEtBQUlNLFlBQVksd0tBQWhCO0FBQ0E7QUFDQUQsUUFBT0UsS0FBUCxDQUFjRCxTQUFkO0FBQ0E7QUFDQSxLQUFJRSxVQUFVUixFQUFFLHlCQUFGLENBQWQ7QUFDQTtBQUNBUSxTQUFRQyxFQUFSLENBQVcsT0FBWCxFQUFvQixVQUFTQyxDQUFULEVBQVk7QUFDL0IsTUFBSUMsV0FBV1gsRUFBRSxJQUFGLENBQWY7QUFDQSxNQUFJVyxTQUFTQyxFQUFULENBQVksVUFBWixDQUFKLEVBQTZCO0FBQzVCUCxVQUFPUSxJQUFQLENBQVksTUFBWixFQUFvQixNQUFwQjtBQUNBLEdBRkQsTUFFTztBQUNOUixVQUFPUSxJQUFQLENBQVksTUFBWixFQUFvQixVQUFwQjtBQUNBO0FBQ0QsRUFQRDtBQVFBO0FBQ0FULFNBQVFLLEVBQVIsQ0FBWSxPQUFaLEVBQXFCLFVBQVNDLENBQVQsRUFBWTtBQUNoQ0wsU0FBT1EsSUFBUCxDQUFZLE1BQVosRUFBb0IsVUFBcEI7QUFDQSxFQUZEO0FBR0E7O0FBRUQsU0FBU0MscUJBQVQsQ0FBZ0NDLFNBQWhDLEVBQTJDQyxjQUEzQyxFQUEyREMsYUFBM0QsRUFBMEVDLGFBQTFFLEVBQXlGQyxjQUF6RixFQUEwRztBQUN0RyxLQUFJQyxXQUFXTCxVQUFVTSxHQUFWLEVBQWY7O0FBRUE7QUFDQUgsZUFBY0wsSUFBZCxDQUFvQixVQUFwQixFQUFnQyxVQUFoQztBQUNBSSxlQUFjSyxXQUFkLENBQTJCLHVCQUEzQjs7QUFFQTtBQUNBSCxrQkFBaUJBLGVBQWVJLE1BQWYsQ0FBdUJDLEdBQUdDLGdCQUFILENBQW9CQyxrQkFBcEIsRUFBdkIsQ0FBakI7O0FBRUE7QUFDQSxLQUFJQyxXQUFXSCxHQUFHQyxnQkFBSCxDQUFvQkcsS0FBcEIsQ0FBMkJSLFFBQTNCLEVBQXFDRCxjQUFyQyxFQUFxREMsUUFBckQsQ0FBZjs7QUFFQTtBQUNBLFNBQVNPLFFBQVQ7QUFDSSxPQUFLLENBQUw7QUFDSVYsaUJBQWNZLFFBQWQsQ0FBd0IsS0FBeEIsRUFBZ0NDLElBQWhDLENBQXNDLHVCQUF1QkMsUUFBUUMsR0FBL0IsR0FBcUMsV0FBM0U7QUFDQTtBQUNKLE9BQUssQ0FBTDtBQUNJZixpQkFBY1ksUUFBZCxDQUF3QixNQUF4QixFQUFpQ0MsSUFBakMsQ0FBdUMsdUJBQXVCQyxRQUFRRSxJQUEvQixHQUFzQyxXQUE3RTtBQUNBO0FBQ0osT0FBSyxDQUFMO0FBQ0loQixpQkFBY1ksUUFBZCxDQUF3QixRQUF4QixFQUFtQ0MsSUFBbkMsQ0FBeUMsdUJBQXVCQyxRQUFRRyxNQUEvQixHQUF3QyxXQUFqRjtBQUNBO0FBQ0osT0FBSyxDQUFMO0FBQ0lqQixpQkFBY1ksUUFBZCxDQUF3QixPQUF4QixFQUFrQ0MsSUFBbEMsQ0FBd0MsdUJBQXVCQyxRQUFRSSxRQUEvQixHQUEwQyxXQUFsRjtBQUNBO0FBQ0o7QUFDSWxCLGlCQUFjWSxRQUFkLENBQXdCLE9BQXhCLEVBQWtDQyxJQUFsQyxDQUF3Qyx1QkFBdUJDLFFBQVFLLEtBQS9CLEdBQXVDLFdBQS9FO0FBZFI7QUFnQkFwQixnQkFBZUssR0FBZixDQUFtQk0sUUFBbkI7O0FBRUE7QUFDQTs7Ozs7QUFLQSxRQUFPQSxRQUFQO0FBQ0g7O0FBRUQzQixFQUFFcUMsUUFBRixFQUFZQyxLQUFaLENBQWtCLFlBQVc7QUFDNUI7QUFDQSxLQUFJdEMsRUFBRSxnQkFBRixFQUFvQnVDLE1BQXBCLEdBQTZCLENBQWpDLEVBQXFDO0FBQ3BDcEM7QUFDQTtBQUNEO0FBQ0EsS0FBSUgsRUFBRSwwQkFBRixFQUE4QnVDLE1BQTlCLEdBQXVDLENBQTNDLEVBQStDO0FBQzlDLE1BQUlDLFVBQVV4QyxFQUFFLHVCQUFGLENBQWQ7QUFDQXdDLFVBQVFqQyxLQUFSLENBQWVQLEVBQUUsOEZBQUYsQ0FBZjtBQUNHQSxJQUFHLE1BQUgsRUFBWVMsRUFBWixDQUFnQixPQUFoQixFQUF5QixnREFBekIsRUFDSSxVQUFVZ0MsS0FBVixFQUFrQjtBQUNkM0IseUJBQ0lkLEVBQUUsZ0RBQUYsQ0FESixFQUN5RDtBQUNyREEsS0FBRSxvQkFBRixDQUZKLEVBRXVDO0FBQ25DQSxLQUFFLHlCQUFGLENBSEosRUFHdUM7QUFDbkNBLEtBQUUsb0JBQUYsQ0FKSixFQUl1QztBQUNuQyxJQUFDLE9BQUQsRUFBVSxRQUFWLEVBQW9CLE1BQXBCLENBTEosQ0FLdUM7QUFMdkM7QUFPSCxHQVRMO0FBV0g7QUFDRCxDQXJCRCIsImZpbGUiOiJ1c2VyLWFjY291bnQtbWFuYWdlbWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciAkID0gd2luZG93LmpRdWVyeTtcblxuZnVuY3Rpb24gc2hvd1Bhc3N3b3JkKCkge1xuXHQvLyBDYWNoZSBvdXIganF1ZXJ5IGVsZW1lbnRzXG5cdHZhciAkc3VibWl0ID0gJCgnLmJ0bi1zdWJtaXQnKTtcblx0dmFyICRmaWVsZCA9ICQoJy5wYXNzd29yZC1zaG93Jyk7XG5cdHZhciBzaG93X3Bhc3MgPSAnPGRpdiBjbGFzcz1cImEtZm9ybS1zaG93LXBhc3N3b3JkIGEtZm9ybS1jYXB0aW9uXCI+PGxhYmVsPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwic2hvd19wYXNzd29yZFwiIGlkPVwic2hvdy1wYXNzd29yZC1jaGVja2JveFwiIHZhbHVlPVwiMVwiPiBTaG93IHBhc3N3b3JkPC9sYWJlbD48L2Rpdj4nO1xuXHQvLyBJbmplY3QgdGhlIHRvZ2dsZSBidXR0b24gaW50byB0aGUgcGFnZVxuXHQkZmllbGQuYWZ0ZXIoIHNob3dfcGFzcyApO1xuXHQvLyBDYWNoZSB0aGUgdG9nZ2xlIGJ1dHRvblxuXHR2YXIgJHRvZ2dsZSA9ICQoJyNzaG93LXBhc3N3b3JkLWNoZWNrYm94Jyk7XG5cdC8vIFRvZ2dsZSB0aGUgZmllbGQgdHlwZVxuXHQkdG9nZ2xlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHR2YXIgY2hlY2tib3ggPSAkKHRoaXMpO1xuXHRcdGlmIChjaGVja2JveC5pcygnOmNoZWNrZWQnKSkge1xuXHRcdFx0JGZpZWxkLmF0dHIoJ3R5cGUnLCAndGV4dCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkZmllbGQuYXR0cigndHlwZScsICdwYXNzd29yZCcpO1xuXHRcdH1cblx0fSk7XG5cdC8vIFNldCB0aGUgZm9ybSBmaWVsZCBiYWNrIHRvIGEgcmVndWxhciBwYXNzd29yZCBlbGVtZW50XG5cdCRzdWJtaXQub24oICdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHQkZmllbGQuYXR0cigndHlwZScsICdwYXNzd29yZCcpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gY2hlY2tQYXNzd29yZFN0cmVuZ3RoKCAkcGFzc3dvcmQsICRzdHJlbmd0aE1ldGVyLCAkc3RyZW5ndGhUZXh0LCAkc3VibWl0QnV0dG9uLCBibGFja2xpc3RBcnJheSApIHtcbiAgICB2YXIgcGFzc3dvcmQgPSAkcGFzc3dvcmQudmFsKCk7XG5cbiAgICAvLyBSZXNldCB0aGUgZm9ybSAmIG1ldGVyXG4gICAgJHN1Ym1pdEJ1dHRvbi5hdHRyKCAnZGlzYWJsZWQnLCAnZGlzYWJsZWQnICk7XG4gICAgJHN0cmVuZ3RoVGV4dC5yZW1vdmVDbGFzcyggJ3Nob3J0IGJhZCBnb29kIHN0cm9uZycgKTtcblxuICAgIC8vIEV4dGVuZCBvdXIgYmxhY2tsaXN0IGFycmF5IHdpdGggdGhvc2UgZnJvbSB0aGUgaW5wdXRzICYgc2l0ZSBkYXRhXG4gICAgYmxhY2tsaXN0QXJyYXkgPSBibGFja2xpc3RBcnJheS5jb25jYXQoIHdwLnBhc3N3b3JkU3RyZW5ndGgudXNlcklucHV0QmxhY2tsaXN0KCkgKVxuXG4gICAgLy8gR2V0IHRoZSBwYXNzd29yZCBzdHJlbmd0aFxuICAgIHZhciBzdHJlbmd0aCA9IHdwLnBhc3N3b3JkU3RyZW5ndGgubWV0ZXIoIHBhc3N3b3JkLCBibGFja2xpc3RBcnJheSwgcGFzc3dvcmQgKTtcblxuICAgIC8vIEFkZCB0aGUgc3RyZW5ndGggbWV0ZXIgcmVzdWx0c1xuICAgIHN3aXRjaCAoIHN0cmVuZ3RoICkge1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAkc3RyZW5ndGhUZXh0LmFkZENsYXNzKCAnYmFkJyApLmh0bWwoICdTdHJlbmd0aDogPHN0cm9uZz4nICsgcHdzTDEwbi5iYWQgKyAnPC9zdHJvbmc+JyApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICRzdHJlbmd0aFRleHQuYWRkQ2xhc3MoICdnb29kJyApLmh0bWwoICdTdHJlbmd0aDogPHN0cm9uZz4nICsgcHdzTDEwbi5nb29kICsgJzwvc3Ryb25nPicgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAkc3RyZW5ndGhUZXh0LmFkZENsYXNzKCAnc3Ryb25nJyApLmh0bWwoICdTdHJlbmd0aDogPHN0cm9uZz4nICsgcHdzTDEwbi5zdHJvbmcgKyAnPC9zdHJvbmc+JyApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICRzdHJlbmd0aFRleHQuYWRkQ2xhc3MoICdzaG9ydCcgKS5odG1sKCAnU3RyZW5ndGg6IDxzdHJvbmc+JyArIHB3c0wxMG4ubWlzbWF0Y2ggKyAnPC9zdHJvbmc+JyApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAkc3RyZW5ndGhUZXh0LmFkZENsYXNzKCAnc2hvcnQnICkuaHRtbCggJ1N0cmVuZ3RoOiA8c3Ryb25nPicgKyBwd3NMMTBuLnNob3J0ICsgJzwvc3Ryb25nPicgKTtcbiAgICB9XG4gICAgJHN0cmVuZ3RoTWV0ZXIudmFsKHN0cmVuZ3RoKTtcblxuICAgIC8vIE9ubHkgZW5hYmxlIHRoZSBzdWJtaXQgYnV0dG9uIGlmIHRoZSBwYXNzd29yZCBpcyBzdHJvbmdcbiAgICAvKlxuICAgIGlmICggNCA9PT0gc3RyZW5ndGggKSB7XG4gICAgICAgICRzdWJtaXRCdXR0b24ucmVtb3ZlQXR0ciggJ2Rpc2FibGVkJyApO1xuICAgIH0qL1xuXG4gICAgcmV0dXJuIHN0cmVuZ3RoO1xufVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0Ly8gc2hvdyBwYXNzd29yZCBpZiB1c2VyIGNsaWNrc1xuXHRpZiAoJCgnLnBhc3N3b3JkLXNob3cnKS5sZW5ndGggPiAwICkge1xuXHRcdHNob3dQYXNzd29yZCgpO1xuXHR9XG5cdC8vIGNoZWNrUGFzc3dvcmRTdHJlbmd0aFxuXHRpZiAoJCgnLnBhc3N3b3JkLXN0cmVuZ3RoLWNoZWNrJykubGVuZ3RoID4gMCApIHtcblx0XHR2YXIgJGJlZm9yZSA9ICQoJy5hLWZvcm0tc2hvdy1wYXNzd29yZCcpO1xuXHRcdCRiZWZvcmUuYWZ0ZXIoICQoJzxtZXRlciBtYXg9XCI0XCIgaWQ9XCJwYXNzd29yZC1zdHJlbmd0aFwiPjxkaXY+PC9kaXY+PC9tZXRlcj48cCBpZD1cInBhc3N3b3JkLXN0cmVuZ3RoLXRleHRcIj48L3A+JykpO1xuXHQgICAgJCggJ2JvZHknICkub24oICdrZXl1cCcsICdpbnB1dFtuYW1lPXBhc3N3b3JkXSwgaW5wdXRbbmFtZT1uZXdfcGFzc3dvcmRdJyxcblx0ICAgICAgICBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdCAgICAgICAgICAgIGNoZWNrUGFzc3dvcmRTdHJlbmd0aChcblx0ICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWU9cGFzc3dvcmRdLCBpbnB1dFtuYW1lPW5ld19wYXNzd29yZF0nKSwgLy8gUGFzc3dvcmQgZmllbGRcblx0ICAgICAgICAgICAgICAgICQoJyNwYXNzd29yZC1zdHJlbmd0aCcpLCAgICAgICAgICAgLy8gU3RyZW5ndGggbWV0ZXJcblx0ICAgICAgICAgICAgICAgICQoJyNwYXNzd29yZC1zdHJlbmd0aC10ZXh0JyksICAgICAgLy8gU3RyZW5ndGggdGV4dCBpbmRpY2F0b3Jcblx0ICAgICAgICAgICAgICAgICQoJ2lucHV0W3R5cGU9c3VibWl0XScpLCAgICAgICAgICAgLy8gU3VibWl0IGJ1dHRvblxuXHQgICAgICAgICAgICAgICAgWydibGFjaycsICdsaXN0ZWQnLCAnd29yZCddICAgICAgICAvLyBCbGFja2xpc3RlZCB3b3Jkc1xuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgICk7XG5cdH1cbn0pO1xuIl19
