"use strict";var $=window.jQuery;function showPassword(){var $submit=$(".btn-submit"),$field=$(".password-show");$field.after('<div class="a-form-show-password a-form-caption"><label><input type="checkbox" name="show_password" id="show-password-checkbox" value="1"> Show password</label></div>'),$("#show-password-checkbox").on("click",function(e){$(this).is(":checked")?$field.attr("type","text"):$field.attr("type","password")}),$submit.on("click",function(e){$field.attr("type","password")})}function checkPasswordStrength($password,$strengthMeter,$strengthText,$submitButton,blacklistArray){var password=$password.val();$strengthText.removeClass("short bad good strong"),blacklistArray=blacklistArray.concat(wp.passwordStrength.userInputBlacklist());var strength=wp.passwordStrength.meter(password,blacklistArray,password);switch(strength){case 2:$strengthText.addClass("bad").html("Strength: <strong>"+pwsL10n.bad+"</strong>");break;case 3:$strengthText.addClass("good").html("Strength: <strong>"+pwsL10n.good+"</strong>");break;case 4:$strengthText.addClass("strong").html("Strength: <strong>"+pwsL10n.strong+"</strong>");break;case 5:$strengthText.addClass("short").html("Strength: <strong>"+pwsL10n.mismatch+"</strong>");break;default:$strengthText.addClass("short").html("Strength: <strong>"+pwsL10n.short+"</strong>")}return $strengthMeter.val(strength),strength}function checkZipCountry(city_field,state_field,zip_field,country_field){var country=country_field.val();""==country&&(country="US",country_field.val(country));var zip=zip_field.val();if(""!==zip){var location={zip_code:zip,country:country};jQuery.ajax({type:"GET",url:user_account_management_rest.site_url+user_account_management_rest.rest_namespace+"/check-zip",data:location,dataType:"json",success:function(response){if("success"===response.status){var location="";location+=response.city,$(city_field).val(response.city),response.city!==response.state&&(location+=", "+response.state,$(state_field).val(response.state)),"US"!==country&&(location+=", "+country),$(".location small").text(location)}else $(".location small").text("")}})}}$(document).ready(function(){($("#rh-name").length>0&&$("#rh-name").val(""),$(".password-show").length>0&&showPassword(),$(".password-strength-check").length>0)&&($(".a-form-show-password").after($('<meter max="4" id="password-strength"><div></div></meter><p id="password-strength-text"></p>')),$("body").on("keyup","input[name=password], input[name=new_password]",function(event){checkPasswordStrength($("input[name=password], input[name=new_password]"),$("#password-strength"),$("#password-strength-text"),$("input[type=submit]"),["black","listed","word"])}));var country=$(".m-form-country #country").val();$(".m-form-zip-code #zip-code").length&&(""==country||"US"==country?($(".m-form-country").hide(),$(".m-form-zip-code #zip-code").prop("type","tel"),$(".m-form-zip-code").append('<div class="a-form-caption location"><small></small></div><div class="a-form-caption show-country"><a href="#" id="registration_show_country"><small>Not in the US?</small></a></div>')):$(".m-form-country #country").length>0&&($(".m-form-zip-code label").html('Postal Code: <span title="This field is required." class="a-form-item-required">*</span>'),$(".m-form-zip-code #zip-code").prop("type","text")),$(".m-form-country #country").length>0&&($("select, input",".m-form-country").hasClass("not-in-us")&&($(".show-country",".m-form-zip-code").remove(),$(".m-form-country").show(),$(".m-form-zip-code #zip-code").prop("type","text"),$(".m-form-zip-code label").html('Postal Code: <span title="This field is required." class="a-form-item-required">*</span>')),0==$(".m-form-city #city").length&&0==$(".m-form-state #state").length&&($(".m-form-country #country, .m-form-zip-code #zip-code").blur(function(){checkZipCountry($('input[name="city"]'),$('input[name="state"]'),$(".m-form-zip-code #zip-code"),$(".m-form-country #country"))}),$(".m-form-country #country").change(function(){checkZipCountry($('input[name="city"]'),$('input[name="state"]'),$(".m-form-zip-code #zip-code"),$(".m-form-country #country"))})),$("#registration_show_country").click(function(){return $(".m-form-zip-code label").html('Postal Code: <span title="This field is required." class="a-form-item-required">*</span>'),$(".m-form-country").slideDown(),$(".m-form-zip-code #zip-code").prop("type","text"),$(this).hide(),!1})))});