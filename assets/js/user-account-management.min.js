!function(){"use strict";function i(){if(document.querySelector(".password-strength-check")){const t=document.querySelector(".a-form-show-password"),s=document.createElement("meter");var e=document.createElement("div");const o=document.createElement("p"),a=document.querySelector(".register-button"),n=(s.setAttribute("max","4"),s.setAttribute("id","password-strength"),o.setAttribute("id","password-strength-text"),s.appendChild(e),t.after(s),t.after(o),document.querySelectorAll("input[name=password], input[name=new_password]"));0<n.length&&a&&n.forEach(function(e){e.addEventListener("keyup",function(e){var e=e.target.value,t=s,n=o,r=(a,["disallowed","listed","word"]);switch(n.classList.remove("short","bad","good","strong"),r=r.concat(wp.passwordStrength.userInputDisallowedList()),r=wp.passwordStrength.meter(e,r,e)){case 2:n.classList.add("bad"),n.innerHTML="Strength: <strong>"+pwsL10n.bad+"</strong>";break;case 3:n.classList.add("good"),n.innerHTML="Strength: <strong>"+pwsL10n.good+"</strong>";break;case 4:n.classList.add("strong"),n.innerHTML="Strength: <strong>"+pwsL10n.strong+"</strong>";break;case 5:n.classList.add("short"),n.innerHTML="Strength: <strong>"+pwsL10n.mismatch+"</strong>";break;default:n.classList.add("short"),n.innerHTML="Strength: <strong>"+pwsL10n.short+"</strong>"}t.setAttribute("value",r)})})}}function d(t){const e=document.querySelector(".m-form-country #country");if(e){void 0===t&&(t=!1);const o=e.querySelectorAll("select","input");0<o.length&&o.forEach(function(e){e.classList.contains("not-in-us")||(t=!0)});var n=document.querySelector(".m-form-zip-code");if(n){var r=e;var s=t;const a=n.querySelector("#zip-code"),c=n.querySelector("label"),i=document.createElement("div"),d=document.createElement("small"),u=document.createElement("div"),l=r.value;i.setAttribute("class","a-form-caption location"),i.innerHTML="<small></small>",n.append(i),u.setAttribute("class","a-form-caption show-country"),function(e,t,n){""===e||"US"===e?(t.setAttribute("type","tel"),n.innerHTML='Zip Code: <span title="This field is required." class="a-form-item-required">*</span>'):(t.setAttribute("type","text"),n.innerHTML='Postal Code: <span title="This field is required." class="a-form-item-required">*</span>')}(l,a,c),!1!==s||""!==l&&"US"!==l?r.parentNode.style.display="block":(r.parentNode.style.display="none",a.innerHTML=d,u.innerHTML='<a href="#" id="registration_show_country"><small>Not in the US?</small></a>',n.append(u))}}}function u(n,r,e,t){let s=t.value;""===s&&(s="US",t.value=s);t=e.value;if(""!==t){e={zip_code:t,country:s};const o=document.querySelector(".location small");o&&(t=user_account_management_rest.site_url+user_account_management_rest.rest_namespace+"/check-zip",t+="?"+new URLSearchParams(e).toString(),fetch(t).then(e=>e.json()).then(t=>{if("success"===t.status){let e="";e+=t.city,n&&(n.value=t.city),t.city!==t.state&&(e+=", "+t.state,r&&(r.value=t.state)),"US"!==s&&(e+=", "+s),o.innerHTML=e}else o.innerHTML=""}).catch(()=>{o.innerHTML=""}))}}document.addEventListener("DOMContentLoaded",function(){{const e=document.querySelector(".password-show");if(e){const t=document.createElement("div"),n=(t.innerHTML='<div class="a-form-show-password a-form-caption"><label><input type="checkbox" name="show_password" id="show-password-checkbox" value="1"> Show password</label></div>',e.after(t),document.querySelector("#show-password-checkbox"));n&&n.addEventListener("click",function(){!0===event.currentTarget.checked?e.setAttribute("type","text"):e.setAttribute("type","password")})}}i(),d();{const r=document.querySelector("#registration_show_country");r&&r.addEventListener("click",function(e){e.preventDefault(),e.target.style.display="none",d(!0)})}{const s=document.querySelector('input[name="city"]'),o=document.querySelector('input[name="state"]'),a=document.querySelector("#zip-code"),c=document.querySelector(".m-form-country #country");return a&&a.addEventListener("blur",()=>{u(s,o,a,c)}),void(c&&c.addEventListener("change",()=>{u(s,o,a,c)}))}})}();