!function(){"use strict";function a(){var e,s,o,t,n;document.querySelector(".password-strength-check")&&(e=document.querySelector(".a-form-show-password"),s=document.createElement("meter"),n=document.createElement("div"),o=document.createElement("p"),t=document.querySelector(".register-button"),s.setAttribute("max","4"),s.setAttribute("id","password-strength"),o.setAttribute("id","password-strength-text"),s.appendChild(n),e.after(s),e.after(o),0<(n=document.querySelectorAll("input[name=password], input[name=new_password]")).length&&t&&n.forEach(function(e){e.addEventListener("keyup",function(e){var e=e.target.value,t=s,n=o,r=["disallowed","listed","word"];switch(n.classList.remove("short","bad","good","strong"),r=r.concat(wp.passwordStrength.userInputDisallowedList()),r=wp.passwordStrength.meter(e,r,e)){case 2:n.classList.add("bad"),n.innerHTML="Strength: <strong>"+pwsL10n.bad+"</strong>";break;case 3:n.classList.add("good"),n.innerHTML="Strength: <strong>"+pwsL10n.good+"</strong>";break;case 4:n.classList.add("strong"),n.innerHTML="Strength: <strong>"+pwsL10n.strong+"</strong>";break;case 5:n.classList.add("short"),n.innerHTML="Strength: <strong>"+pwsL10n.mismatch+"</strong>";break;default:n.classList.add("short"),n.innerHTML="Strength: <strong>"+pwsL10n.short+"</strong>"}t.setAttribute("value",r)})}))}function c(t){var e,n,r,s,o,a,c,i,u,d=document.querySelector(".m-form-country #country");d&&(void 0===t&&(t=!1),0<(n=d.querySelectorAll("select","input")).length&&n.forEach(function(e){e.classList.contains("not-in-us")||(t=!0)}),(n=document.querySelector(".m-form-zip-code"))&&(d=d,r=t,s=(n=n).querySelector("#zip-code"),o=n.querySelector("label"),a=document.createElement("div"),c=document.createElement("small"),i=document.createElement("div"),u=d.value,a.setAttribute("class","a-form-caption location"),a.innerHTML="<small></small>",n.append(a),i.setAttribute("class","a-form-caption show-country"),a=s,o=o,""===(e=u)||"US"===e?(a.setAttribute("type","tel"),o.innerHTML='Zip Code: <span title="This field is required." class="a-form-item-required">*</span>'):(a.setAttribute("type","text"),o.innerHTML='Postal Code: <span title="This field is required." class="a-form-item-required">*</span>'),!1!==r||""!==u&&"US"!==u?d.parentNode.style.display="block":(d.parentNode.style.display="none",s.innerHTML=c,i.innerHTML='<a href="#" id="registration_show_country"><small>Not in the US?</small></a>',n.append(i))))}function i(n,r,e,t){var s,o=t.value,t=(""===o&&(o="US",t.value=o),e.value);""!==t&&(e={zip_code:t,country:o},(s=document.querySelector(".location small"))&&(t=user_account_management_rest.site_url+user_account_management_rest.rest_namespace+"/check-zip",t+="?"+new URLSearchParams(e).toString(),fetch(t).then(function(e){return e.json()}).then(function(e){var t;"success"===e.status?(t="",t+=e.city,n&&(n.value=e.city),e.city!==e.state&&(t+=", "+e.state,r&&(r.value=e.state)),"US"!==o&&(t+=", "+o),s.innerHTML=t):s.innerHTML=""}).catch(function(){s.innerHTML=""})))}document.addEventListener("DOMContentLoaded",function(){var e,t,n,r,s,o;(e=document.querySelector(".password-show"))&&((t=document.createElement("div")).innerHTML='<div class="a-form-show-password a-form-caption"><label><input type="checkbox" name="show_password" id="show-password-checkbox" value="1"> Show password</label></div>',e.after(t),(t=document.querySelector("#show-password-checkbox"))&&t.addEventListener("click",function(){!0===event.currentTarget.checked?e.setAttribute("type","text"):e.setAttribute("type","password")})),a(),c(),(t=document.querySelector("#registration_show_country"))&&t.addEventListener("click",function(e){e.preventDefault(),e.target.style.display="none",c(!0)}),n=document.querySelector('input[name="city"]'),r=document.querySelector('input[name="state"]'),s=document.querySelector("#zip-code"),o=document.querySelector(".m-form-country #country"),s&&s.addEventListener("blur",function(){i(n,r,s,o)}),o&&o.addEventListener("change",function(){i(n,r,s,o)})})}();